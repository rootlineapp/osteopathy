<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: Helvetica, Arial, sans-serif; font-size: 12px; }
        h1 { text-align: center; color: #1f4d57; }
        h2 { color: #1f4d57; }
        .section { margin-bottom: 20px; }
        .bold { font-weight: bold; }
        ul { margin: 0; padding-left: 20px; }
    </style>
</head>
<body>
    <h1>SOAP Visit Summary</h1>

    <div class="section">
        <p><span class="bold">Patient Name:</span> {{ name }}</p>
        <p><span class="bold">Date:</span> {{ date }}</p>
        <p><span class="bold">Chief Complaints:</span></p>
        <ul>
            {% for c in complaints %}
                <li>{{ c }}</li>
            {% endfor %}
        </ul>
    </div>

    <div class="section">
        <h2>Subjective</h2>
        <p>Patient presents with complaints as noted above. Symptoms include discomfort and dysfunction in specified regions.</p>
    </div>

    <div class="section">
        <h2>Objective</h2>
        <p><span class="bold">Findings:</span></p>
        <ul>
            {% for assessment, result in findings.items() %}
                <li><strong>{{ assessment }}</strong>: {{ result }}</li>
            {% endfor %}
        </ul>
    </div>

    <div class="section">
        <h2>Assessment</h2>
        <p>Somatic dysfunctions identified in assessed regions.</p>
    </div>

    <div class="section">
        <h2>Plan</h2>
        {% for region, techniques in techniques_by_region.items() %}
            <p><strong>{{ region }}</strong></p>
            <ul>
                {% for t in techniques %}
                    <li>{{ t.name }} ({{ t.category }}) â€” matched to "{{ t.matched_finding }}"</li>
                {% endfor %}
            </ul>
        {% endfor %}
    </div>

    <div class="section">
        <p><em>This report was generated by the OsteoSmart App.</em></p>
    </div>
</body>
</html>

